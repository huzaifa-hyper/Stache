<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$STACHE - Victory to the Stache</title>
    <link rel="stylesheet" href="style.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Lato:wght@400;700&family=Poppins:wght@600;800&display=swap" rel="stylesheet">

    <!-- === STYLES FOR THE QUICK THINKER GAME === -->
    <style>
        :root {
            --light-grey: #A9A9AA; --near-black: #1B1B1B; --dark-grey: #373636;
            --medium-grey: #424242; --darkest-black: #121212; --accent-red: #9C3A3B;
            --accent-brown: #A67A4B;
        }

        /* Main Arcade Section Style */
        .game-section {
            background-color: var(--near-black);
            padding: 60px 20px;
            text-align: center;
        }
        .game-section h2 {
            color: #fff;
            margin-bottom: 40px;
            font-family: 'Oswald', sans-serif;
            font-size: 2.5rem;
            text-transform: uppercase;
        }

        #main-container {
            width: 100%;
            max-width: 500px;
            position: relative;
            margin: 0 auto;
            z-index: 10;
        }
        
        .game-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            background-color: var(--dark-grey);
            border-radius: 10px;
            padding: 20px;
            box-sizing: border-box;
            aspect-ratio: 1 / 1.1;
            font-family: 'Poppins', sans-serif;
        }
        
        #top-bar {
            width: 100%;
        }
        
        #match-timer-bar {
            width: 100%;
            height: 10px;
            background-color: var(--medium-grey);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 5px;
        }
        
        #match-timer-progress {
            width: 100%;
            height: 100%;
            background-color: var(--accent-red);
            border-radius: 5px;
            transition: width 0.2s linear;
        }

        .score-display-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 18px;
        }
        .player-name { font-weight: 800; }
        .player-score { color: var(--light-grey); font-weight: 800; }
        .p1-color { color: var(--accent-brown); }
        .p2-color { color: var(--accent-red); }
        .sp-color { color: var(--light-grey); }

        #game-content-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            width: 100%;
        }

        #question-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        #timer-container {
            position: relative;
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #timer-text {
            position: absolute;
            font-size: 50px;
            font-weight: 800;
            color: var(--light-grey);
            transition: color 0.3s ease-in-out;
            line-height: 1;
            z-index: 1;
        }
        #timer-text.urgent {
            color: var(--accent-red);
        }
        
        #timer-svg { position: absolute; top: 0; left: 0; transform: rotate(-90deg); }
        .timer-ring {
            stroke: var(--accent-brown);
            stroke-width: 10;
            fill: transparent;
        }

        #prompt-display {
            font-size: 22px;
            font-weight: 600;
            color: var(--light-grey);
            text-align: center;
            padding: 0 10px;
        }

        .bottom-controls {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .game-button {
            padding: 15px 40px; border: none; border-radius: 50px;
            font-size: 18px; font-weight: 800; cursor: pointer; transition: transform 0.2s, opacity 0.2s;
            width: 80%;
            max-width: 300px;
        }
        .game-button:hover { transform: scale(1.05); }

        #success-btn { background-color: var(--accent-brown); color: var(--darkest-black); }
        #fail-btn { background-color: var(--medium-grey); color: var(--light-grey); }
        #repeat-btn { background-color: var(--darkest-black); color: var(--light-grey); }

        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: var(--light-grey); text-align: center;
            background-color: rgba(18, 18, 18, 0.7); backdrop-filter: blur(5px);
            transition: opacity 0.3s ease; z-index: 100;
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
        }
        
        .screen.static { position: static; background: none; backdrop-filter: none; }
        
        .player-input {
            width: 80%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: 2px solid var(--medium-grey);
            background-color: var(--light-grey); font-size: 16px; font-family: 'Poppins', sans-serif; font-weight: 600;
        }

        .hidden { display: none !important; }

        /* BUG FIX: Scoped h1 and p to only affect screens within the game container */
        #main-container .screen h1 {
            font-size: 42px; /* SIZE FIX: Reduced font size */
            font-weight: 800;
            color: var(--light-grey);
            text-shadow: 0 4px 10px rgba(0,0,0,0.5);
            margin: 0;
        }
        #main-container #startScreen h1 {
             font-size: 52px; /* Keep start screen h1 larger */
        }

        #main-container .screen h1 .accent { color: var(--accent-red); }
        #main-container .screen p { font-size: 16px; margin: 20px 0 30px; font-weight: 600; }
        
        .play-button {
            background-color: var(--accent-brown); color: var(--darkest-black); padding: 15px 40px;
            border: none; border-radius: 50px; font-size: 20px; font-weight: 800; cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease;
            width: 70%;
            max-width: 300px;
            font-family: 'Poppins', sans-serif;
        }
        .play-button:hover { background-color: var(--accent-red); color: var(--light-grey); transform: scale(1.05); }

        @media (max-width: 500px) {
            #main-container .screen h1 { font-size: 32px; }
            #main-container #startScreen h1 { font-size: 40px; }
            #prompt-display { font-size: 18px; }
            #main-container .screen p { font-size: 14px; margin: 15px 0 25px; }
            .play-button { font-size: 18px; padding: 12px 30px; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="stache-logo2.webp" alt="Stache Nav Logo" class="nav-logo">
                <span class="nav-brand-text">Stache</span>
            </div>
            <div class="nav-links">
                <a href="#lore">Lore</a>
                <a href="#tokenomics">Tokenomics</a>
                <a href="#stache-arcade">Arcade</a>
            </div>
        </div>
    </nav>

    <header class="hero-section">
         <div class="hero-content">
            <img src="stache-logo.webp" alt="$STACHE Logo" class="hero-logo">
            <h1 class="main-headline">$STACHE</h1>
            <p class="sub-headline">VICTORY TO THE $STACHE</p>
            <div class="cta-container">
                <a href="https://www.kuru.io/trade/0x029b0d48dc90673118e7fd857f9388bf69759f11" target="_blank" class="cta-button primary">BUY NOW</a>
                <a href="https://x.com/StacheCoinMON" target="_blank" class="cta-button secondary">FOLLOW ON X</a>
            </div>
        </div>
    </header>

    <main>
        <section id="lore" class="lore-section">
            <div class="container">
                <div class="lore-content">
                    <div class="lore-image"><img src="cozy-pic.webp" alt="Cozy character with bear hat"></div>
                    <div class="lore-text">
                        <h2>The Legend of the Stache</h2>
                        <p>Cozy’s got a mustache so legendary, it’s basically his trademark. He noticed that every time he trimmed it, the bear market would hit hard. So he made a solemn vow: never cut the mustache again.</p>
                        <p>As long as that glorious ‘stache keeps growing, the bull market stays strong, and $STACHE grows with it for all of us. Our victory is tied to its length.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="tokenomics" class="tokenomics-section">
             <div class="container">
                <h2>The War Economy</h2>
                <div class="tokenomics-grid">
                    <div class="token-card">
                        <h3>Total Supply</h3>
                        <p>1 Billion $STACHE</p>
                        <span>Fixed supply for a long, prosperous bull run.</span>
                    </div>
                    <div class="token-card contract">
                        <h3>Official Contract</h3>
                        <p id="contractAddress">0x029b0d48dc90673118e7fd857f9388bf69759f11</p>
                        <button id="copyButton">Copy Address</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- === $STACHE ARCADE SECTION === -->
        <section id="stache-arcade" class="game-section">
            <div class="container">
                <h2>$STACHE ARCADE</h2>
                
                <!-- Quick Thinker Game Container -->
                <div id="main-container">
                    <div id="gameScreen" class="game-screen hidden">
                        <div id="top-bar">
                            <div id="singleplayer-ui" class="score-display-container hidden">
                                <div id="streak-display"><span class="sp-color player-name">Streak: </span><span class="player-score">0</span></div>
                            </div>
                            <div id="multiplayer-ui" class="hidden" style="width: 100%;">
                                <div id="match-timer-bar"><div id="match-timer-progress"></div></div>
                                <div class="score-display-container">
                                    <div id="p1-score-display">P1: 0</div>
                                    <div id="p2-score-display">P2: 0</div>
                                </div>
                            </div>
                        </div>
                        <div id="game-content-container">
                            <div id="question-view">
                                <div id="timer-container">
                                    <div id="timer-text">10</div>
                                    <svg id="timer-svg" width="150" height="150">
                                        <circle class="timer-ring" cx="75" cy="75" r="65"></circle>
                                    </svg>
                                </div>
                                <div id="prompt-display">Get Ready...</div>
                            </div>
                            <div id="response-view" class="bottom-controls hidden">
                                <div id="response-container" style="display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%;">
                                    <button id="success-btn" class="game-button" onclick="handleResponse(true)">I Did It!</button>
                                    <button id="fail-btn" class="game-button" onclick="handleResponse(false)">Couldn't Think</button>
                                </div>
                                <button id="repeat-btn" class="game-button" onclick="handleRepeat()">Skip Question (+7s)</button>
                            </div>
                        </div>
                        <div style="height: 50px;"></div> 
                    </div>

                    <div id="startScreen" class="screen static">
                        <h1>Quick <span class="accent">Thinker</span></h1>
                        <p>Choose your game mode</p>
                        <button class="play-button" style="margin-bottom: 15px;" onclick="setMode('single')">Single Player</button>
                        <button class="play-button" onclick="setMode('multi')">Play with Friends</button>
                    </div>
                    
                    <div id="name-input-screen" class="screen hidden">
                        <p style="font-size: 20px; font-weight: 800;">Enter Player Names</p>
                        <input type="text" id="p1-name" class="player-input" placeholder="Player 1 Name" value="Player 1">
                        <input type="text" id="p2-name" class="player-input" placeholder="Player 2 Name" value="Player 2">
                        <button class="play-button" onclick="startMultiplayerGame()">Start Match</button>
                    </div>

                    <div id="resultScreen" class="screen hidden">
                        <h1 id="result-title"></h1>
                        <p id="result-text"></p>
                        <button class="play-button" onclick="showStartScreen()">Main Menu</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p class="disclaimer">$STACHE is a memecoin created for entertainment. Not financial advice. Always do your own research.</p>
            <p class="copyright">&copy; 2025 $STACHE. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>

    <!-- === QUICK THINKER GAME JAVASCRIPT === -->
    <script>
        // --- DOM Elements ---
        const allScreens = document.querySelectorAll('#main-container .screen, #main-container .game-screen');
        const startScreen = document.getElementById('startScreen');
        const nameInputScreen = document.getElementById('name-input-screen');
        const gameScreen = document.getElementById('gameScreen');
        const resultScreen = document.getElementById('resultScreen');
        const promptDisplay = document.getElementById('prompt-display');
        const questionView = document.getElementById('question-view');
        const responseView = document.getElementById('response-view');
        const timerRing = document.querySelector('.timer-ring');
        const timerTextEl = document.getElementById('timer-text');
        
        const singlePlayerUI = document.getElementById('singleplayer-ui');
        const multiPlayerUI = document.getElementById('multiplayer-ui');
        const streakDisplay = document.getElementById('streak-display');
        const p1ScoreDisplay = document.getElementById('p1-score-display');
        const p2ScoreDisplay = document.getElementById('p2-score-display');
        const matchTimerProgress = document.getElementById('match-timer-progress');
        const resultTitle = document.getElementById('result-title');
        const resultText = document.getElementById('result-text');

        // --- Game Data ---
        const basePrompts = [
            "Name 3 things you can find in a bathroom.", "Name 3 countries in Europe.", "Name 2 yellow fruits.",
            "Name 3 things you can do at a park.", "Name 2 famous actors.", "Name 3 types of weather.", 
            "Name 2 planets in our solar system.", "Name 3 things that are cold.",
            "Name 3 sports that use a ball.", "Name 2 animals that live in the ocean."
        ];
        const userPrompts = [
            "Who is Anago?", "If you ever meet Bill Monday, what 2 questions would you ask him?", "Give 2 reasons to love John W. Rich Kid.",
            "Name 5 Mon-animals.", "Who is the CTO of Monad?", "Name 4 NFT projects on Monad.", "Name 3 DEXs on Monad.",
            "List the top 3 coins from the MOB: The CLOB contest.", "Name 1 team member of Just Jerry Coin.", "Name 1 team member of Kol Token.",
            "Name 1 member of ClobChad.", "Name 3 members with the Clobster role in the Kuru Discord.", "Name 3 members with the ClobCreator role in the Kuru Discord.",
            "Name 3 members with the Clob-OG role.", "Give 2 reasons why $STACHE is better than $FLORIDA."
        ];
        const allPrompts = [...basePrompts, ...userPrompts];
        
        // --- Game State ---
        let gameMode, gameActive, availableQuestions;
        let p1Name, p2Name, p1Score, p2Score, currentPlayer;
        let singlePlayerStreak;
        let questionTimeLeft, matchTimeLeft;
        let questionTimerInterval, matchTimerInterval;
        const QUESTION_TIME = 10;
        const MATCH_TIME = 120;
        const ringRadius = 65;
        const ringCircumference = 2 * Math.PI * ringRadius;
        timerRing.style.strokeDasharray = ringCircumference;

        function showScreen(screen) {
            allScreens.forEach(s => s.classList.add('hidden'));
            screen.classList.remove('hidden');
        }

        function showStartScreen() { showScreen(startScreen); }

        function setMode(mode) {
            gameMode = mode;
            if (mode === 'single') startSinglePlayerGame();
            else showScreen(nameInputScreen);
        }

        function startSinglePlayerGame() {
            showScreen(gameScreen);
            singlePlayerUI.classList.remove('hidden');
            multiPlayerUI.classList.add('hidden');
            gameActive = true;
            singlePlayerStreak = 0;
            updateStreakDisplay();
            nextRound();
        }

        function startMultiplayerGame() {
            p1Name = document.getElementById('p1-name').value || "Player 1";
            p2Name = document.getElementById('p2-name').value || "Player 2";
            p1Score = 0;
            p2Score = 0;
            currentPlayer = 1;

            showScreen(gameScreen);
            singlePlayerUI.classList.add('hidden');
            multiPlayerUI.classList.remove('hidden');
            
            availableQuestions = [...allPrompts].sort(() => 0.5 - Math.random());
            gameActive = true;
            matchTimeLeft = MATCH_TIME;
            
            updateMultiplayerScoreDisplay();
            if(matchTimerInterval) clearInterval(matchTimerInterval);
            matchTimerInterval = setInterval(updateMatchTimer, 100);
            nextRound();
        }
        
        function nextRound() {
            questionView.classList.remove('hidden');
            responseView.classList.add('hidden');
            
            if (gameMode === 'multi' && availableQuestions.length === 0) {
                promptDisplay.textContent = "No more questions!";
                endGame();
                return;
            }

            const prompt = gameMode === 'multi' 
                ? availableQuestions.pop() 
                : allPrompts[Math.floor(Math.random() * allPrompts.length)];
            
            const turnIndicator = gameMode === 'multi' ? `<strong class="${currentPlayer === 1 ? 'p1-color' : 'p2-color'} player-name">${currentPlayer === 1 ? p1Name : p2Name}'s Turn:</strong><br>` : '';
            promptDisplay.innerHTML = turnIndicator + prompt;
            
            startQuestionTimer();
        }
        
        function startQuestionTimer() {
            if (questionTimerInterval) clearInterval(questionTimerInterval);
            questionTimeLeft = QUESTION_TIME;

            timerTextEl.textContent = questionTimeLeft;
            timerTextEl.classList.remove('urgent');
            timerRing.style.transition = 'none';
            timerRing.style.strokeDashoffset = 0;
            timerRing.style.stroke = 'var(--accent-brown)';
            
            void timerRing.offsetWidth; 

            timerRing.style.transition = `stroke-dashoffset ${QUESTION_TIME}s linear`;
            timerRing.style.strokeDashoffset = ringCircumference;

            questionTimerInterval = setInterval(() => {
                questionTimeLeft--;
                timerTextEl.textContent = Math.max(0, questionTimeLeft);
                if (questionTimeLeft === 3) {
                    timerTextEl.classList.add('urgent');
                    timerRing.style.transition = 'stroke-dashoffset 3s linear, stroke 0.5s ease-in-out';
                    timerRing.style.stroke = 'var(--accent-red)';
                }
                if (questionTimeLeft < 0) {
                    showResponseButtons();
                }
            }, 1000);
        }
        
        function updateMatchTimer() {
            matchTimeLeft -= 0.1;
            matchTimerProgress.style.width = `${(matchTimeLeft / MATCH_TIME) * 100}%`;
            if (matchTimeLeft <= 0) {
                endGame();
            }
        }

        function showResponseButtons() {
            clearInterval(questionTimerInterval);
            questionView.classList.add('hidden');
            responseView.classList.remove('hidden');
            document.getElementById('repeat-btn').style.display = gameMode === 'multi' ? 'block' : 'none';
        }
        
        function handleResponse(success) {
            if (!gameActive) return;
            
            if (success) {
                if (gameMode === 'single') {
                    singlePlayerStreak++;
                    updateStreakDisplay();
                } else {
                    if (currentPlayer === 1) p1Score++; else p2Score++;
                    updateMultiplayerScoreDisplay();
                    currentPlayer = currentPlayer === 1 ? 2 : 1;
                }
            } else {
                if(gameMode === 'single') { endGame(); return; }
                else currentPlayer = currentPlayer === 1 ? 2 : 1;
            }
            nextRound();
        }

        function handleRepeat() {
            if (!gameActive || gameMode !== 'multi') return;
            matchTimeLeft += 7;
            if(matchTimeLeft > MATCH_TIME) matchTimeLeft = MATCH_TIME;
            nextRound();
        }
        
        function updateStreakDisplay() { streakDisplay.innerHTML = `<span class="sp-color player-name">Streak: </span><span class="player-score">${singlePlayerStreak}</span>`; }
        
        function updateMultiplayerScoreDisplay() {
            p1ScoreDisplay.innerHTML = `<span class="player-name p1-color">${p1Name}</span>: <span class="player-score">${p1Score}</span>`;
            p2ScoreDisplay.innerHTML = `<span class="player-name p2-color">${p2Name}</span>: <span class="player-score">${p2Score}</span>`;
        }
        
        function endGame() {
            gameActive = false;
            clearInterval(questionTimerInterval);
            clearInterval(matchTimerInterval);
            
            if (gameMode === 'single') {
                resultTitle.innerHTML = `Game <span class="accent">Over</span>`;
                resultText.innerHTML = `You got a streak of <strong>${singlePlayerStreak}</strong>!`;
            } else {
                if (p1Score > p2Score) resultTitle.innerHTML = `<span class="p1-color">${p1Name}</span> Wins!`;
                else if (p2Score > p1Score) resultTitle.innerHTML = `<span class="p2-color">${p2Name}</span> Wins!`;
                else resultTitle.innerHTML = `It's a <span class="accent">Draw!</span>`;
                resultText.innerHTML = `Final Score:<br><strong class="p1-color">${p1Name}: ${p1Score}</strong> | <strong class="p2-color">${p2Name}: ${p2Score}</strong>`;
            }
            
            showScreen(resultScreen);
        }
    </script>
</body>
</html>

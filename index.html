<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$STACHE - Victory to the Stache</title>
    <link rel="stylesheet" href="style.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Lato:wght@400;700&family=Poppins:wght@600;800&display=swap" rel="stylesheet">

    <!-- === COMBINED STYLES FOR BOTH GAMES === -->
    <style>
        :root {
            --light-grey: #A9A9AA; --near-black: #1B1B1B; --dark-grey: #373636;
            --medium-grey: #424242; --darkest-black: #121212; --accent-red: #9C3A3B;
            --accent-brown: #A67A4B;
        }
        .game-section {
            background-color: var(--near-black); padding: 60px 20px; text-align: center;
        }
        .game-section h2 {
            color: #fff; margin-bottom: 40px; font-family: 'Oswald', sans-serif;
            font-size: 2.5rem; text-transform: uppercase;
        }
        .hidden { display: none !important; }

        /* --- Arcade Menu Styles --- */
        #arcade-menu {
            display: flex; flex-direction: column; align-items: center; gap: 15px; margin-bottom: 30px;
        }
        .arcade-menu-button {
            background-color: var(--dark-grey); color: var(--light-grey); padding: 15px 40px;
            border: none; border-radius: 50px; font-size: 20px; font-weight: 800; cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease; width: 80%; max-width: 400px;
            font-family: 'Poppins', sans-serif;
        }
        .arcade-menu-button:hover { background-color: var(--accent-brown); color: var(--darkest-black); transform: scale(1.05); }

        /* --- General Game Container Styles --- */
        .game-wrapper {
            width: 100%; max-width: 500px; position: relative; margin: 0 auto;
            font-family: 'Poppins', sans-serif;
        }
        .game-screen {
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            background-color: var(--dark-grey); border-radius: 10px; padding: 20px;
            box-sizing: border-box; aspect-ratio: 1 / 1.1;
        }
        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: var(--light-grey); text-align: center; background-color: rgba(18, 18, 18, 0.7);
            backdrop-filter: blur(5px); transition: opacity 0.3s ease; z-index: 100; border-radius: 10px;
        }
        .screen.static { position: static; background: none; backdrop-filter: none; }
        .screen h1 {
            font-size: 52px; font-weight: 800; color: var(--light-grey);
            text-shadow: 0 4px 10px rgba(0,0,0,0.5); margin: 0; font-family: 'Poppins', sans-serif;
        }
        .screen p { font-size: 16px; margin: 20px 0 30px; font-weight: 600; font-family: 'Poppins', sans-serif; }
        .play-button {
            background-color: var(--accent-brown); color: var(--darkest-black); padding: 15px 40px;
            border: none; border-radius: 50px; font-size: 20px; font-weight: 800; cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease; width: 70%; max-width: 300px;
            font-family: 'Poppins', sans-serif;
        }
        .play-button:hover { background-color: var(--accent-red); color: var(--light-grey); transform: scale(1.05); }

        /* --- Tic-Tac-Toe Styles --- */
        #tictactoe-container { aspect-ratio: 1 / 1.15; max-width: 450px; }
        #status-display { width: 100%; padding: 10px 0; font-size: 20px; font-weight: 600; color: var(--light-grey); text-align: center; height: 10%; }
        #game-board { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); width: 100%; height: 90%; gap: 10px; background-color: var(--dark-grey); padding: 10px; border-radius: 10px; box-sizing: border-box; }
        .cell { background-color: var(--light-grey); border-radius: 8px; cursor: pointer; display: flex; justify-content: center; align-items: center; position: relative; }
        .cell:not(.x):not(.o):hover { background-color: #c1c1c2; }
        .cell.x::before, .cell.x::after { content: ''; position: absolute; width: 75%; height: 12%; background-color: var(--accent-red); border-radius: 5px; animation: ttt-draw-in 0.3s ease-out forwards; }
        .cell.x::before { transform: rotate(45deg); } .cell.x::after { transform: rotate(-45deg); }
        .cell.o::before { content: ''; position: absolute; width: 70%; height: 70%; border: 15px solid var(--accent-brown); border-radius: 50%; box-sizing: border-box; animation: ttt-draw-in 0.3s ease-out forwards; }
        @keyframes ttt-draw-in { 0% { opacity: 0; transform: scale(0); } 100% { opacity: 1; transform: scale(1); } }
        .cell.win { animation: ttt-pulse 0.8s infinite; }
        @keyframes ttt-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        #tictactoe-container .screen button { width: 80%; margin-top: 15px; }

        /* --- Quick Thinker Styles --- */
        #top-bar { width: 100%; }
        #match-timer-bar { width: 100%; height: 10px; background-color: var(--medium-grey); border-radius: 5px; overflow: hidden; margin-bottom: 5px; }
        #match-timer-progress { width: 100%; height: 100%; background-color: var(--accent-red); border-radius: 5px; transition: width 0.2s linear; }
        .score-display-container { display: flex; justify-content: space-between; width: 100%; font-size: 18px; }
        .player-name { font-weight: 800; } .player-score { color: var(--light-grey); font-weight: 800; }
        .p1-color { color: var(--accent-brown); } .p2-color { color: var(--accent-red); } .sp-color { color: var(--light-grey); }
        #game-content-container { display: flex; flex-direction: column; justify-content: center; align-items: center; flex-grow: 1; width: 100%; }
        #question-view { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; }
        #timer-container { position: relative; width: 150px; height: 150px; display: flex; justify-content: center; align-items: center; }
        #timer-text { position: absolute; font-size: 50px; font-weight: 800; color: var(--light-grey); transition: color 0.3s ease-in-out; line-height: 1; z-index: 1; }
        #timer-text.urgent { color: var(--accent-red); }
        #timer-svg { position: absolute; top: 0; left: 0; transform: rotate(-90deg); }
        .timer-ring { stroke: var(--accent-brown); stroke-width: 10; fill: transparent; }
        #prompt-display { font-size: 22px; font-weight: 600; color: var(--light-grey); text-align: center; padding: 0 10px; }
        .bottom-controls { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .game-button { padding: 15px 40px; border: none; border-radius: 50px; font-size: 18px; font-weight: 800; cursor: pointer; transition: transform 0.2s, opacity 0.2s; width: 80%; max-width: 300px; }
        .game-button:hover { transform: scale(1.05); }
        #success-btn { background-color: var(--accent-brown); color: var(--darkest-black); }
        #fail-btn { background-color: var(--medium-grey); color: var(--light-grey); }
        #repeat-btn { background-color: var(--darkest-black); color: var(--light-grey); }
        .player-input { width: 80%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: 2px solid var(--medium-grey); background-color: var(--light-grey); font-size: 16px; font-family: 'Poppins', sans-serif; font-weight: 600; }
        
        @media (max-width: 500px) {
            .screen h1 { font-size: 40px; }
            .screen p { font-size: 14px; margin: 15px 0 25px; }
            .play-button, .arcade-menu-button { font-size: 18px; padding: 12px 30px; }
            #prompt-display { font-size: 18px; }
            .cell.o::before { border-width: 12px; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="stache-logo2.webp" alt="Stache Nav Logo" class="nav-logo">
                <span class="nav-brand-text">Stache</span>
            </div>
            <div class="nav-links">
                <a href="#lore">Lore</a>
                <a href="#tokenomics">Tokenomics</a>
                <a href="#stache-arcade">Arcade</a>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <div class="hero-content">
            <img src="stache-logo.webp" alt="$STACHE Logo" class="hero-logo">
            <h1 class="main-headline">$STACHE</h1>
            <p class="sub-headline">VICTORY TO THE $STACHE</p>
            <div class="cta-container">
                <a href="https://www.kuru.io/trade/0x029b0d48dc90673118e7fd857f9388bf69759f11" target="_blank" class="cta-button primary">BUY NOW</a>
                <a href="https://x.com/StacheCoinMON" target="_blank" class="cta-button secondary">FOLLOW ON X</a>
            </div>
        </div>
    </header>

    <main>
        <section id="lore" class="lore-section">
            <!-- Your Lore Section Content -->
        </section>

        <section id="tokenomics" class="tokenomics-section">
            <!-- Your Tokenomics Section Content -->
        </section>

        <!-- === $STACHE ARCADE SECTION WITH BOTH GAMES === -->
        <section id="stache-arcade" class="game-section">
            <div class="container">
                <h2>$STACHE ARCADE</h2>

                <div id="arcade-menu">
                    <button class="arcade-menu-button" onclick="showGame('tictactoe')">Play Tic-Tac-Toe</button>
                    <button class="arcade-menu-button" onclick="showGame('quickthinker')">Play Quick Thinker</button>
                </div>

                <!-- Tic-Tac-Toe Game Container -->
                <div id="tictactoe-container" class="game-wrapper hidden">
                    <div id="ttt-modeSelectScreen" class="screen static">
                        <h1>Tic<span style="color:var(--accent-red);">-</span>Tac<span style="color:var(--accent-brown);">-</span>Toe</h1>
                        <p>Choose your game mode</p>
                        <button class="play-button" style="margin-bottom: 15px;" onclick="ttt_selectMode('ai')">Player vs AI</button>
                        <button class="play-button" onclick="ttt_selectMode('2player')">2 Players</button>
                    </div>
                    <div id="ttt-game-container" class="game-screen hidden">
                        <div id="status-display"></div>
                        <div id="game-board"></div>
                        <div id="ttt-resultScreen" class="screen hidden">
                            <h1 id="ttt-result-title"></h1>
                            <p id="ttt-result-text"></p>
                            <button class="play-button" onclick="ttt_startGame()">Play Again</button>
                        </div>
                    </div>
                </div>

                <!-- Quick Thinker Game Container -->
                <div id="quickthinker-container" class="game-wrapper hidden">
                    <div id="qt-gameScreen" class="game-screen hidden">
                        <div id="top-bar">
                            <div id="singleplayer-ui" class="score-display-container hidden">
                                <div id="streak-display"><span class="sp-color player-name">Streak: </span><span class="player-score">0</span></div>
                            </div>
                            <div id="multiplayer-ui" class="hidden" style="width: 100%;">
                                <div id="match-timer-bar"><div id="match-timer-progress"></div></div>
                                <div class="score-display-container">
                                    <div id="p1-score-display">P1: 0</div>
                                    <div id="p2-score-display">P2: 0</div>
                                </div>
                            </div>
                        </div>
                        <div id="game-content-container">
                            <div id="question-view">
                                <div id="timer-container">
                                    <div id="timer-text">10</div>
                                    <svg id="timer-svg" width="150" height="150">
                                        <circle class="timer-ring" cx="75" cy="75" r="65"></circle>
                                    </svg>
                                </div>
                                <div id="prompt-display">Get Ready...</div>
                            </div>
                            <div id="response-view" class="bottom-controls hidden">
                                <div id="response-container" style="display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%;">
                                    <button id="success-btn" class="game-button" onclick="qt_handleResponse(true)">I Did It!</button>
                                    <button id="fail-btn" class="game-button" onclick="qt_handleResponse(false)">Couldn't Think</button>
                                </div>
                                <button id="repeat-btn" class="game-button" onclick="qt_handleRepeat()">Skip Question (+7s)</button>
                            </div>
                        </div>
                        <div style="height: 50px;"></div>
                    </div>
                    <div id="qt-startScreen" class="screen static">
                        <h1>Quick <span class="accent">Thinker</span></h1>
                        <p>Choose your game mode</p>
                        <button class="play-button" style="margin-bottom: 15px;" onclick="qt_setMode('single')">Single Player</button>
                        <button class="play-button" onclick="qt_setMode('multi')">Play with Friends</button>
                    </div>
                    <div id="qt-name-input-screen" class="screen hidden">
                        <p style="font-size: 20px; font-weight: 800;">Enter Player Names</p>
                        <input type="text" id="p1-name" class="player-input" placeholder="Player 1 Name" value="Player 1">
                        <input type="text" id="p2-name" class="player-input" placeholder="Player 2 Name" value="Player 2">
                        <button class="play-button" onclick="qt_startMultiplayerGame()">Start Match</button>
                    </div>
                    <div id="qt-resultScreen" class="screen hidden">
                        <h1 id="qt-result-title">Game <span class="accent">Over</span></h1>
                        <p id="qt-result-text"></p>
                        <button class="play-button" onclick="qt_showStartScreen()">Main Menu</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <!-- Your Footer Content -->
    </footer>

    <script src="script.js"></script>

    <script>
        // --- ARCADE MENU LOGIC ---
        const tictactoeContainer = document.getElementById('tictactoe-container');
        const quickthinkerContainer = document.getElementById('quickthinker-container');
        const arcadeMenu = document.getElementById('arcade-menu');

        function showGame(gameName) {
            arcadeMenu.classList.add('hidden');
            if (gameName === 'tictactoe') {
                tictactoeContainer.classList.remove('hidden');
            } else if (gameName === 'quickthinker') {
                quickthinkerContainer.classList.remove('hidden');
            }
        }

        // --- TIC-TAC-TOE SCRIPT (prefixed with ttt_) ---
        const ttt_gameBoard = document.getElementById('game-board');
        const ttt_resultScreen = document.getElementById('ttt-resultScreen');
        const ttt_resultTitle = document.getElementById('ttt-result-title');
        const ttt_resultText = document.getElementById('ttt-result-text');
        const ttt_statusDisplay = document.getElementById('status-display');
        const ttt_modeSelectScreen = document.getElementById('ttt-modeSelectScreen');
        const ttt_gameContainer = document.getElementById('ttt-game-container');
        let ttt_gameMode = 'ai', ttt_currentPlayer = 'x', ttt_gameState = Array(9).fill(""), ttt_gameActive = true;
        const ttt_winningConditions = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        function ttt_selectMode(mode){ttt_gameMode=mode;ttt_modeSelectScreen.classList.add('hidden');ttt_gameContainer.classList.remove('hidden');ttt_startGame()}
        function ttt_startGame(){ttt_gameActive=true;ttt_currentPlayer='x';ttt_gameState.fill("");ttt_resultScreen.classList.add('hidden');ttt_gameBoard.innerHTML='';ttt_updateStatus();for(let i=0;i<9;i++){const cell=document.createElement('div');cell.classList.add('cell');cell.setAttribute('data-cell-index',i);cell.addEventListener('click',ttt_handleCellClick);ttt_gameBoard.appendChild(cell)}}
        function ttt_handleCellClick(e){const t=e.target,n=parseInt(t.getAttribute('data-cell-index'));if(""!==ttt_gameState[n]&&ttt_gameActive){if(ttt_placeMark(t,n),!ttt_checkResult()){ttt_changePlayer();'ai'===ttt_gameMode&&'o'===ttt_currentPlayer&&ttt_gameActive&&(ttt_gameActive=!1,setTimeout(ttt_aiMove,700))}}}
        function ttt_aiMove(){let e=ttt_findBestMove();if(null!==e){const t=document.querySelector(`#tictactoe-container [data-cell-index='${e}']`);ttt_placeMark(t,e),ttt_checkResult()||ttt_changePlayer(),ttt_gameActive=!0}}
        function ttt_findBestMove(){for(let e=0;e<9;e++)if(""===ttt_gameState[e]){if(ttt_gameState[e]='o',ttt_isWinner('o'))return ttt_gameState[e]="",e;ttt_gameState[e]=""}for(let e=0;e<9;e++)if(""===ttt_gameState[e]){if(ttt_gameState[e]='x',ttt_isWinner('x'))return ttt_gameState[e]="",e;ttt_gameState[e]=""}const e=[4,0,2,6,8,1,3,5,7];for(const t of e)if(""===ttt_gameState[t])return t;return null}
        function ttt_isWinner(e){return ttt_winningConditions.some(t=>t.every(t=>ttt_gameState[t]===e))}
        function ttt_placeMark(e,t){ttt_gameState[t]=ttt_currentPlayer;e.classList.add(ttt_currentPlayer)}
        function ttt_checkResult(){let e=!1,t=[];for(const n of ttt_winningConditions){const[l,o,s]=n;if(ttt_gameState[l]&&ttt_gameState[l]===ttt_gameState[o]&&ttt_gameState[l]===ttt_gameState[s]){e=!0,t=n;break}}return e?(ttt_endGame(!1,t),!0):!ttt_gameState.includes("")&&(ttt_endGame(!0),!0)}
        function ttt_changePlayer(){ttt_currentPlayer='x'==ttt_currentPlayer?'o':'x';ttt_updateStatus()}
        function ttt_endGame(e,t=[]){ttt_gameActive=!1;e?(ttt_resultTitle.innerHTML="It's a <span style='color:var(--accent-o)'>Draw!</span>",ttt_resultText.textContent="A well-fought battle."):(t.forEach(e=>{document.querySelector(`#tictactoe-container [data-cell-index='${e}']`).classList.add('win')}),'ai'===ttt_gameMode?ttt_resultTitle.innerHTML='x'==ttt_currentPlayer?"You Win!":"AI Wins!":ttt_resultTitle.innerHTML=`Player <span style='color:var(--accent-${ttt_currentPlayer})'>${ttt_currentPlayer.toUpperCase()}</span> Wins!`,ttt_resultText.textContent="Well played!"),setTimeout(()=>{ttt_resultScreen.classList.remove('hidden')},1200)}
        function ttt_updateStatus(){if(ttt_gameActive)'ai'===ttt_gameMode?ttt_statusDisplay.textContent='x'==ttt_currentPlayer?"Your Turn":"AI is thinking...":ttt_statusDisplay.textContent=`Player ${ttt_currentPlayer.toUpperCase()}'s Turn`}

        // --- QUICK THINKER SCRIPT (prefixed with qt_) ---
        const qt_allScreens = document.querySelectorAll('#quickthinker-container .screen, #quickthinker-container .game-screen');
        const qt_startScreen = document.getElementById('qt-startScreen');
        const qt_nameInputScreen = document.getElementById('qt-name-input-screen');
        const qt_gameScreen = document.getElementById('qt-gameScreen');
        const qt_resultScreen = document.getElementById('qt-resultScreen');
        const qt_promptDisplay = document.getElementById('prompt-display');
        const qt_questionView = document.getElementById('question-view');
        const qt_responseView = document.getElementById('response-view');
        const qt_timerRing = document.querySelector('.timer-ring');
        const qt_timerTextEl = document.getElementById('timer-text');
        const qt_singlePlayerUI = document.getElementById('singleplayer-ui');
        const qt_multiPlayerUI = document.getElementById('multiplayer-ui');
        const qt_streakDisplay = document.getElementById('streak-display');
        const qt_p1ScoreDisplay = document.getElementById('p1-score-display');
        const qt_p2ScoreDisplay = document.getElementById('p2-score-display');
        const qt_matchTimerProgress = document.getElementById('match-timer-progress');
        const qt_resultTitle = document.getElementById('qt-result-title');
        const qt_resultText = document.getElementById('qt-result-text');
        const qt_basePrompts = ["Name 3 things you can find in a bathroom.","Name 3 countries in Europe.","Name 2 yellow fruits.","Name 3 things you can do at a park.","Name 2 famous actors.","Name 3 types of weather.","Name 2 planets in our solar system.","Name 3 things that are cold.","Name 3 sports that use a ball.","Name 2 animals that live in the ocean."];
        const qt_userPrompts = ["Who is Anago?","If you ever meet Bill Monday, what 2 questions would you ask him?","Give 2 reasons to love John W. Rich Kid.","Name 5 Mon-animals.","Who is the CTO of Monad?","Name 4 NFT projects on Monad.","Name 3 DEXs on Monad.","List the top 3 coins from the MOB: The CLOB contest.","Name 1 team member of Just Jerry Coin.","Name 1 team member of Kol Token.","Name 1 member of ClobChad.","Name 3 members with the Clobster role in the Kuru Discord.","Name 3 members with the ClobCreator role in the Kuru Discord.","Name 3 members with the Clob-OG role.","Give 2 reasons why $STACHE is better than $FLORIDA."];
        const qt_allPrompts = [...qt_basePrompts, ...qt_userPrompts];
        let qt_gameMode, qt_gameActive, qt_availableQuestions;
        let qt_p1Name, qt_p2Name, qt_p1Score, qt_p2Score, qt_currentPlayer;
        let qt_singlePlayerStreak;
        let qt_questionTimeLeft, qt_matchTimeLeft;
        let qt_questionTimerInterval, qt_matchTimerInterval;
        const QT_QUESTION_TIME = 10;
        const QT_MATCH_TIME = 120;
        const qt_ringRadius = 65;
        const qt_ringCircumference = 2 * Math.PI * qt_ringRadius;
        qt_timerRing.style.strokeDasharray = qt_ringCircumference;
        function qt_showScreen(screen){qt_allScreens.forEach(s=>s.classList.add('hidden'));screen.classList.remove('hidden')}
        function qt_showStartScreen(){qt_showScreen(qt_startScreen)}
        function qt_setMode(mode){qt_gameMode=mode;if(mode==='single')qt_startSinglePlayerGame();else qt_showScreen(qt_nameInputScreen)}
        function qt_startSinglePlayerGame(){qt_showScreen(qt_gameScreen);qt_singlePlayerUI.classList.remove('hidden');qt_multiPlayerUI.classList.add('hidden');qt_gameActive=true;qt_singlePlayerStreak=0;qt_updateStreakDisplay();qt_nextRound()}
        function qt_startMultiplayerGame(){qt_p1Name=document.getElementById('p1-name').value||"Player 1";qt_p2Name=document.getElementById('p2-name').value||"Player 2";qt_p1Score=0;qt_p2Score=0;qt_currentPlayer=1;qt_showScreen(qt_gameScreen);qt_singlePlayerUI.classList.add('hidden');qt_multiPlayerUI.classList.remove('hidden');qt_availableQuestions=[...qt_allPrompts].sort(()=>0.5-Math.random());qt_gameActive=true;qt_matchTimeLeft=QT_MATCH_TIME;qt_updateMultiplayerScoreDisplay();if(qt_matchTimerInterval)clearInterval(qt_matchTimerInterval);qt_matchTimerInterval=setInterval(qt_updateMatchTimer,100);qt_nextRound()}
        function qt_nextRound(){qt_questionView.classList.remove('hidden');qt_responseView.classList.add('hidden');if(qt_gameMode==='multi'&&qt_availableQuestions.length===0){qt_promptDisplay.textContent="No more questions!";qt_endGame();return}const prompt=qt_gameMode==='multi'?qt_availableQuestions.pop():qt_allPrompts[Math.floor(Math.random()*qt_allPrompts.length)];const turnIndicator=qt_gameMode==='multi'?`<strong class="${qt_currentPlayer===1?'p1-color':'p2-color'} player-name">${qt_currentPlayer===1?qt_p1Name:qt_p2Name}'s Turn:</strong><br>`:'';qt_promptDisplay.innerHTML=turnIndicator+prompt;qt_startQuestionTimer()}
        function qt_startQuestionTimer(){if(qt_questionTimerInterval)clearInterval(qt_questionTimerInterval);qt_questionTimeLeft=QT_QUESTION_TIME;qt_timerTextEl.textContent=qt_questionTimeLeft;qt_timerTextEl.classList.remove('urgent');qt_timerRing.style.transition='none';qt_timerRing.style.strokeDashoffset=0;qt_timerRing.style.stroke='var(--accent-brown)';void qt_timerRing.offsetWidth;qt_timerRing.style.transition=`stroke-dashoffset ${QT_QUESTION_TIME}s linear`;qt_timerRing.style.strokeDashoffset=qt_ringCircumference;qt_questionTimerInterval=setInterval(()=>{qt_questionTimeLeft--;qt_timerTextEl.textContent=Math.max(0,qt_questionTimeLeft);if(qt_questionTimeLeft===3){qt_timerTextEl.classList.add('urgent');qt_timerRing.style.transition='stroke-dashoffset 3s linear, stroke 0.5s ease-in-out';qt_timerRing.style.stroke='var(--accent-red)'}if(qt_questionTimeLeft<0){qt_showResponseButtons()}},1000)}
        function qt_updateMatchTimer(){qt_matchTimeLeft-=0.1;qt_matchTimerProgress.style.width=`${(qt_matchTimeLeft/QT_MATCH_TIME)*100}%`;if(qt_matchTimeLeft<=0){qt_endGame()}}
        function qt_showResponseButtons(){clearInterval(qt_questionTimerInterval);qt_questionView.classList.add('hidden');qt_responseView.classList.remove('hidden');document.getElementById('repeat-btn').style.display=qt_gameMode==='multi'?'block':'none'}
        function qt_handleResponse(success){if(!qt_gameActive)return;if(success){if(qt_gameMode==='single'){qt_singlePlayerStreak++;qt_updateStreakDisplay()}else{if(qt_currentPlayer===1)qt_p1Score++;else qt_p2Score++;qt_updateMultiplayerScoreDisplay();qt_currentPlayer=qt_currentPlayer===1?2:1}}else{if(qt_gameMode==='single'){qt_endGame();return}else qt_currentPlayer=qt_currentPlayer===1?2:1}qt_nextRound()}
        function qt_handleRepeat(){if(!qt_gameActive||qt_gameMode!=='multi')return;qt_matchTimeLeft+=7;if(qt_matchTimeLeft>QT_MATCH_TIME)qt_matchTimeLeft=QT_MATCH_TIME;qt_nextRound()}
        function qt_updateStreakDisplay(){streakDisplay.innerHTML=`<span class="sp-color player-name">Streak: </span><span class="player-score">${qt_singlePlayerStreak}</span>`}
        function qt_updateMultiplayerScoreDisplay(){qt_p1ScoreDisplay.innerHTML=`<span class="player-name p1-color">${qt_p1Name}</span>: <span class="player-score">${qt_p1Score}</span>`;qt_p2ScoreDisplay.innerHTML=`<span class="player-name p2-color">${qt_p2Name}</span>: <span class="player-score">${qt_p2Score}</span>`}
        function qt_endGame(){qt_gameActive=false;clearInterval(qt_questionTimerInterval);clearInterval(qt_matchTimerInterval);if(qt_gameMode==='single'){qt_resultTitle.innerHTML=`Game <span class="accent">Over</span>`;qt_resultText.innerHTML=`You got a streak of <strong>${qt_singlePlayerStreak}</strong>!`}else{if(qt_p1Score>qt_p2Score)qt_resultTitle.innerHTML=`<span class="p1-color">${qt_p1Name}</span> Wins!`;else if(qt_p2Score>qt_p1Score)qt_resultTitle.innerHTML=`<span class="p2-color">${qt_p2Name}</span> Wins!`;else qt_resultTitle.innerHTML=`It's a <span class="accent">Draw!</span>`;qt_resultText.innerHTML=`Final Score:<br><strong class="p1-color">${qt_p1Name}: ${qt_p1Score}</strong> | <strong class="p2-color">${qt_p2Name}: ${qt_p2Score}</strong>`}qt_showScreen(qt_resultScreen)}
    </script>
</body>
</html>
